<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login Form</title>
  <style>
    /* [ SAME CSS AS BEFORE — unchanged for brevity ] */
    /* ... (CSS remains exactly as you provided — full styles omitted here for clarity) */
  </style>
</head>
<body>
  <div class="background-bubbles">
    <div class="bubble bubble1"></div>
    <div class="bubble bubble2"></div>
    <div class="bubble bubble3"></div>
    <div class="bubble bubble4"></div>
    <div class="bubble bubble5"></div>
  </div>
  <div class="login-container">
    <h2>Login</h2>
    <form onsubmit="return validateLogin(event)">
      <div class="error-message" id="errorMsg"></div>
      <div class="input-group">
        <input type="text" id="username" placeholder=" " autocomplete="username" required>
        <label for="username">Username</label>
      </div>
      <div class="input-group">
        <input type="password" id="password" placeholder=" " autocomplete="current-password" required>
        <label for="password">Password</label>
        <span class="show-hide" id="togglePassword" title="Show/Hide Password">&#128065;</span>
      </div>
      <button type="submit">Login</button>
    </form>
  </div>

  <script>
    // Hashed credentials (SHA-256)
    const users = {
      "admin": "03ac674216f3e15c761ee1a5e255f067953623c8b388b4459e13f978d7c846f4",       // 1234
      "user1": "bcb1b2a2c7c3e6c2e1e7e2e1e7e2e1e7e2e1e7e2e1e7e2e1e7e2e1e7e2e1e7e2",       // dummy
      "john": "b2e98ad6f6eb8508dd6a14cfa704bad7f05f6fb1b8b3e6e3c1e7e2e1e7e2e1e7e2",      // dummy
      "princesse": "4bab2ab52bdcdb88e62e8063f6fa7dd95e16a1be75ec04c3a1eb0537898b4e84", // wonderland
      "aslam": "31d21842d257322048c1b53fcd0a7ff1041ae2ae61f023d4180379423c044213"       // securepass
    };

    // SHA-256 hash function
    async function sha256(str) {
      const encoder = new TextEncoder();
      const data = encoder.encode(str);
      const hashBuffer = await crypto.subtle.digest("SHA-256", data);
      return Array.from(new Uint8Array(hashBuffer)).map(b => b.toString(16).padStart(2, "0")).join("");
    }

    // Validate login
    async function validateLogin(event) {
      event.preventDefault();
      const username = document.getElementById("username").value.trim();
      const password = document.getElementById("password").value;

      const hash = await sha256(password);
      if (users[username] && users[username] === hash) {
        // ✅ Store username in sessionStorage
        sessionStorage.setItem("loggedInUser", username);
        // ✅ Redirect to home
        window.location.href = "home.html";
      } else {
        // ❌ Redirect to denied
        window.location.href = "denied.html";
      }
    }

    // Password visibility toggle
    const passwordInput = document.getElementById("password");
    const togglePassword = document.getElementById("togglePassword");
    togglePassword.onclick = () => {
      const isHidden = passwordInput.type === "password";
      passwordInput.type = isHidden ? "text" : "password";
      togglePassword.style.color = isHidden ? "#2980b9" : "#aaa";
    };
  </script>
</body>
</html>
